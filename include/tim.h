//
// Created by marijn on 7/6/23.
//

#ifndef STM32H_CMSIS_TIM_H
#define STM32H_CMSIS_TIM_H
#include "main.h"


/*!<
 * types
 * */
typedef enum {	// sub: 0bTTTNCC -> T: sub_timer (HRTIM), C: channel_number, N: (N channel)
	// TIM1
	TIM1_CH1N_A7 =			0x07011040,		TIM1_CH1_A8 =			0x08010040,
	TIM1_CH2_A9 =			0x09010440,		TIM1_CH3_A10 =			0x0A010840,
	TIM1_CH4_A11 =			0x0B010C40,		TIM1_ETR_A12 =			0x0C010040,
	TIM1_CH2N_B0 =			0x00111440,		TIM1_CH3N_B1 =			0x01111840,
	TIM1_CH1N_B13 =			0x0D111040,		TIM1_CH2N_B14 =			0x0E111440,
	TIM1_CH3N_B15 =			0x0F111840,		TIM1_ETR_E7 =			0x07410040,
	TIM1_CH1N_E8 =			0x08411040,		TIM1_CH1_E9 =			0x09410040,
	TIM1_CH2N_E10 =			0x0A411440,		TIM1_CH2_E11 =			0x0B410440,
	TIM1_CH3N_E12 =			0x0C411840,		TIM1_CH3_E13 =			0x0D410840,
	TIM1_CH4_E14 =			0x0E410C40,		TIM1_ETR_G5 =			0x05610040,
	TIM1_CH3N_J8 =			0x08911840,		TIM1_CH3_J9 =			0x09910840,
	TIM1_CH2N_J10 =			0x0A911440,		TIM1_CH2_J11 =			0x0B910440,
	TIM1_CH1N_K0 =			0x00A11040,		TIM1_CH1_K1 =			0x01A10040,
	// TIM2
	TIM2_CH1_ETR_A0 =		0x00010000,		TIM2_CH2_A1 =			0x01010400,
	TIM2_CH3_A2 =			0x02010800,		TIM2_CH4_A3 =			0x03010C00,
	TIM2_CH1_ETR_A5 =		0x05010000,		TIM2_CH1_ETR_A15 =		0x0F010000,
	TIM2_CH2_B3 =			0x03110400,		TIM2_CH3_B10 =			0x0A110800,
	TIM2_CH4_B11 =			0x0B110C00,
	// TIM3
	TIM3_CH1_A6 =			0x06020001,		TIM3_CH2_A7 =			0x07020401,
	TIM3_CH3_B0 =			0x00120801,		TIM3_CH4_B1 =			0x01120C01,
	TIM3_CH1_B4 =			0x04120001,		TIM3_CH2_B5 =			0x05120401,
	TIM3_CH1_C6 =			0x06220001,		TIM3_CH2_C7 =			0x07220401,
	TIM3_CH3_C8 =			0x08220801,		TIM3_CH4_C9 =			0x09220C01,
	TIM3_ETR_D2 =			0x02320001,
	// TIM4
	TIM4_CH1_B6 =			0x06120002,		TIM4_CH2_B7 =			0x07120402,
	TIM4_CH3_B8 =			0x08120802,		TIM4_CH4_B9 =			0x09120C02,
	TIM4_CH1_D12 =			0x0C320002,		TIM4_CH2_D13 =			0x0D320402,
	TIM4_CH3_D14 =			0x0E320802,		TIM4_CH4_D15 =			0x0F320C02,
	TIM4_ETR_E0 =			0x00420002,
	// TIM5
	TIM5_CH1_A0 =			0x00020003,		TIM5_CH2_A1 =			0x01020403,
	TIM5_CH3_A2 =			0x02020803,		TIM5_CH4_A3 =			0x03020C03,
	TIM5_ETR_A4 =			0x04020003,		TIM5_ETR_H8 =			0x08720003,
	TIM5_CH1_H10 =			0x0A720003,		TIM5_CH2_H11 =			0x0B720403,
	TIM5_CH3_H12 =			0x0C720803,		TIM5_CH4_I0 =			0x00820C03,
	// TIM8
	TIM8_ETR_A0 =			0x00030041,		TIM8_CH1N_A5 =			0x05031041,
	TIM8_CH1N_A7 =			0x07031041,		TIM8_CH2N_B0 =			0x00131441,
	TIM8_CH3N_B1 =			0x01131841,		TIM8_CH2N_B14 =			0x0E131441,
	TIM8_CH3N_B15 =			0x0F131841,		TIM8_CH1_C6 =			0x06230041,
	TIM8_CH2_C7 =			0x07230441,		TIM8_CH3_C8 =			0x08230841,
	TIM8_CH4_C9 =			0x09230C41,		TIM8_ETR_G8 =			0x08630041,
	TIM8_CH1N_H13 =			0x0D731041,		TIM8_CH2N_H14 =			0x0E731441,
	TIM8_CH3N_H15 =			0x0F731841,		TIM8_CH4_I2 =			0x02830C41,
	TIM8_ETR_I3 =			0x03830041,		TIM8_CH1_I5 =			0x05830041,
	TIM8_CH2_I6 =			0x06830441,		TIM8_CH3_I7 =			0x07830841,
	TIM8_CH2_J6 =			0x06930441,		TIM8_CH2N_J7 =			0x07931441,
	TIM8_CH1_J8 =			0x08930041,		TIM8_CH1N_J9 =			0x09931041,
	TIM8_CH2_J10 =			0x0A930441,		TIM8_CH2N_J11 =			0x0B931441,
	TIM8_CH3_K0 =			0x00A30841,		TIM8_CH3N_K1 =			0x01A31841,
	// TIM12
	TIM12_CH1_B14 =			0x0E120006,		TIM12_CH2_B15 =			0x0F120406,
	TIM12_CH1_H6 =			0x06720006,		TIM12_CH2_H9 =			0x09720406,
	// TIM13
	TIM13_CH1_A6 =			0x06090007,		TIM13_CH1_F8 =			0x08590007,
	// TIM14
	TIM14_CH1_A7 =			0x07090008,		TIM14_CH1_F9 =			0x09590008,
	// TIM15
	TIM15_CH1N_A1 =			0x01041030,		TIM15_CH1_A2 =			0x02040030,
	TIM15_CH2_A3 =			0x03040430,		TIM15_CH1N_E4 =			0x04441030,
	TIM15_CH1_E5 =			0x05440030,		TIM15_CH2_E6 =			0x06440430,
	// TIM16
	TIM16_CH1N_B6 =			0x06111031,		TIM16_CH1_B8 =			0x08110031,
	TIM16_CH1_F6 =			0x06510031,		TIM16_CH1N_F8 =			0x08511031,
	// TIM17
	TIM17_CH1N_B7 =			0x07111032,		TIM17_CH1_B9 =			0x09110032,
	TIM17_CH1_F7 =			0x07510032,		TIM17_CH1N_F9 =			0x09511032,

	// LPTIM1
	LPTIM1_IN1_D12 =		0x0C310009,		LPTIM1_OUT_D13 =		0x0D310009,
	LPTIM1_ETR_E0 =			0x00410009,		LPTIM1_IN2_E1 =			0x01410409,
	LPTIM1_IN2_G11 =		0x0B610409,		LPTIM1_IN1_G12 =		0x0C610009,
	LPTIM1_OUT_G13 =		0x0D610009,		LPTIM1_ETR_G14 =		0x0E610009,
	LPTIM1_IN2_H2 =			0x02710409,
	// LPTIM2
	LPTIM2_IN1_B10 =		0x0A1300C9,		LPTIM2_ETR_B11 =		0x0B1300C9,
	LPTIM2_OUT_B13 =		0x0D1300C9,		LPTIM2_IN2_D11 =		0x0B3304C9,
	LPTIM2_IN1_D12 =		0x0C3300C9,		LPTIM2_ETR_E0 =			0x004400C9,
	// LPTIM3
	LPTIM3_OUT_A1 =			0x010300CA,
	// LPTIM4
	LPTIM4_OUT_A2 =			0x020300CB,
	// LPTIM5
	LPTIM5_OUT_A3 =			0x030300CC,

	// HRTIM
	HRTIM_CHB2_A8 =			0x0802245D,		HRTIM_CHC1_A9 =			0x0902405D,
	HRTIM_CHC2_A10 =		0x0A02445D,		HRTIM_CHD1_A11 =		0x0B02605D,
	HRTIM_CHD2_A12 =		0x0C02645D,		HRTIM_SCOUT_B10 =		0x0A12005D,
	HRTIM_SCIN_B11 =		0x0B12005D,		HRTIM_CHA1_C6 =			0x0621005D,
	HRTIM_CHA2_C7 =			0x0721045D,		HRTIM_CHB1_C8 =			0x0821205D,
	HRTIM_SCIN_E0 =			0x0043005D,		HRTIM_SCOUT_E1 =		0x0143005D,
	HRTIM_CHE1_G6 =			0x0662805D,		HRTIM_CHE2_G7 =			0x0762845D
} TIM_GPIO_t;

/* BKIN
	TIM1_BKIN_A6 =			0x06010040,
	TIM1_BKIN_B12 =			0x0C110040,
	TIM1_BKIN_COMP12_B12 =	0,	// TODO
	TIM1_BKIN2_E6 =			0x06410440,
	TIM1_BKIN_E15 =			0x0F410040,
	TIM1_BKIN2_COMP12_E6 =	0,	// TODO
	TIM1_BKIN_COMP12_E15 =	0,	// TODO
	COMP_TIM1_BKIN_E15 =	0,	// TODO (eq to TIM1_BKIN_COMP12_E15)
	TIM1_BKIN2_G4 =			0x04610440,
	TIM1_BKIN2_COMP12_G4 =	0,	// TODO
	TIM1_BKIN_K2 =			0x02A10040,
	TIM1_BKIN_COMP12_K2 =	0,	// TODO
	TIM8_BKIN_A6 =			0x06030041,
	TIM8_BKIN2_A8 =			0x08030441,
	TIM8_BKIN_COMP12_A6 =	0,	// TODO
	TIM8_BKIN_G2 =			0x02630041,
	TIM8_BKIN2_G3 =			0x03630441,
	TIM8_BKIN_COMP12_G2 =	0,	// TODO
	TIM8_BKIN2_COMP12_G3 =	0,	// TODO
	TIM8_BKIN2_I1 =			0x01830441,
	TIM8_BKIN_I4 =			0x04830041,
	TIM8_BKIN2_COMP12_I1 =	0,	// TODO
	TIM8_BKIN_COMP12_I4 =	0,	// TODO
	TIM8_BKIN_K2 =			0x02A30041,
	TIM8_BKIN_COMP12_K2 =	0,	// TODO
	TIM15_BKIN_A0 =			0x00040030,
	TIM15_BKIN_E3 =			0x03440030,
	TIM16_BKIN_B4 =			0x04110031,
	TIM16_BKIN_F10 =		0x0A510031,
	TIM17_BKIN_B5 =			0x05110032,
	TIM17_BKIN_G6 =			0x06610032,
*/
/* FLT, EEV
	HRTIM_FLT1_A15 =		0,	// TODO
	HRTIM_FLT4_B3 =			0,	// TODO
	HRTIM_EEV6_B4 =			0,	// TODO
	HRTIM_EEV7_B5 =			0,  // TODO
	HRTIM_EEV8_B6 =			0,  // TODO
	HRTIM_EEV9_B7 =			0,  // TODO
	HRTIM_EEV1_C10 =		0,  // TODO
	HRTIM_FLT2_C10 =		0,  // TODO
	HRTIM_EEV2_C10 =		0,  // TODO
	HRTIM_FLT3_D4 =			0,	// TODO
	HRTIM_EEV3_D5 =			0,	// TODO
	HRTIM_FLT5_G10 =		0,	// TODO
	HRTIM_EEV4_G11 =		0,	// TODO
	HRTIM_EEV5_G12 =		0,	// TODO
	HRTIM_EEV10_G13 =		0	// TODO
*/


/*!<
 * misc
 * */
uint8_t TIM_to_IRQn(TIM_TypeDef* tim);
/*!<
 * init
 * */
void fconfig_TIM(
		TIM_TypeDef* tim,				uint16_t prescaler,		uint32_t limit,
		uint8_t auto_reload_preload,	uint8_t down_count,		uint8_t one_pulse
);
void config_TIM(TIM_TypeDef* tim, uint16_t prescaler, uint32_t limit);
void disable_TIM(TIM_TypeDef* tim);
/*!<
 * actions
 * */
void start_TIM(TIM_TypeDef* tim);
void stop_TIM(TIM_TypeDef* tim);
/*!<
 * irq
 * */
void start_TIM_update_irq(TIM_TypeDef* tim);
void stop_TIM_update_irq(TIM_TypeDef* tim);


#endif //STM32H_CMSIS_TIM_H
